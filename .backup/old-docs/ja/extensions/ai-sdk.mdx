---
title: AI SDK で任意モデルを指定
description: Connect your Agents SDK agents to any model through the Vercel's AI SDK
---

import { Aside, Steps, Code } from '@astrojs/starlight/components';

export const aiSdkSetupExample = `import { Agent } from '@openai/agents';
import { createAISDKAdapter } from '@openai/agents/extensions/ai-sdk';
import { anthropic } from '@ai-sdk/anthropic';
import { openai } from '@ai-sdk/openai';

// AnthropicのClaudeでアダプターを作成
const claudeAdapter = createAISDKAdapter({
  model: anthropic('claude-3-5-sonnet-20241022'),
  // オプション: モデルパラメータを設定
  settings: {
    temperature: 0.7,
    maxTokens: 1000,
  }
});

// エージェントでClaudeを使用
const claudeAgent = new Agent({
  model: claudeAdapter,
  instructions: 'Claudeによって駆動される親切なアシスタントです。',
});

// 他のAI SDKプロバイダーも使用可能
const gpt4Adapter = createAISDKAdapter({
  model: openai('gpt-4-turbo'),
  settings: {
    temperature: 0.3,
    maxTokens: 2000,
  }
});

const gpt4Agent = new Agent({
  model: gpt4Adapter,
  instructions: 'GPT-4によって駆動される親切なアシスタントです。',
  tools: [
    {
      type: 'function',
      function: {
        name: 'get_weather',
        description: '現在の天気情報を取得',
        parameters: {
          type: 'object',
          properties: {
            location: { type: 'string', description: '都市名' }
          },
          required: ['location']
        }
      }
    }
  ]
});

// 異なるモデルでエージェントを実行
const claudeResult = await claudeAgent.run('量子コンピューティングを説明してください');
const gpt4Result = await gpt4Agent.run('東京の天気はどうですか？');

console.log('Claudeの応答:', claudeResult.finalOutput);
console.log('GPT-4の応答:', gpt4Result.finalOutput);`;

<Aside type="caution">
  このアダプターはまだベータ版です。特に小規模なモデルプロバイダーでは問題が発生する可能性があります。問題があれば
  [GitHub issues](https://github.com/openai/openai-agents-js/issues)
  から報告してください。迅速に修正します。
</Aside>

標準で Agents SDK は Responses API または Chat Completions API を通じて OpenAI のモデルと連携します。別のモデルを使いたい場合は、[Vercel's AI SDK](https://sdk.vercel.ai/) がサポートする幅広いモデルを、このアダプター経由で Agents SDK に取り込むことができます。

## セットアップ

<Steps>

1. 拡張パッケージをインストールして AI SDK アダプターを導入します:

   ```bash
   npm install @openai/agents-extensions
   ```

2. [Vercel's AI SDK](https://sdk.vercel.ai/docs/models/overview) の一覧から目的のモデルパッケージを選び、インストールします:

   ```bash
   npm install @ai-sdk/openai@"^1.0.0"
   ```

3. アダプターとモデルをインポートしてエージェントに接続します:

   ```typescript
   import { openai } from '@ai-sdk/openai';
   import { aisdk } from '@openai/agents-extensions';
   ```

4. エージェントが使用するモデルのインスタンスを初期化します:

   ```typescript
   const model = aisdk(openai('o4-mini'));
   ```

</Steps>

<Aside type="caution">
  Vercel's AI SDK は最近 v2 に移行しましたが、openai agent extensions はまだ v2
  と互換性がありません。 そのため Vercel's AI SDK は v1
  をインストールする必要があります。
</Aside>

## 例

<Code lang="typescript" code={aiSdkSetupExample} title="AI SDK セットアップ" />

## プロバイダーのメタデータの受け渡し

メッセージにプロバイダー固有のオプションを送る必要がある場合は、`providerMetadata` を通して渡します。値は基盤の AI SDK モデルにそのままフォワードされます。たとえば Agents SDK で以下の `providerData`

```ts
providerData: {
  anthropic: {
    cacheControl: {
      type: 'ephemeral';
    }
  }
}
```

は、AI SDK 連携を使用する場合、次のようになります

```ts
providerMetadata: {
  anthropic: {
    cacheControl: {
      type: 'ephemeral';
    }
  }
}
```
