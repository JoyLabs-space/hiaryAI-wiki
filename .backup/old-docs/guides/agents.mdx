---
title: Agents
description: Learn more about how to define agents in the OpenAI Agents SDK for JavaScript / TypeScript
---

import { Code } from '@astrojs/starlight/components';

export const simpleAgent = `import { Agent } from '@openai/agents';

const agent = new Agent({
  model: 'gpt-4o-mini',
  instructions: 'You are a helpful customer service agent.',
});

const result = await agent.run('What are your business hours?');
console.log(result.messages[result.messages.length - 1].content);`;

export const agentWithTools = `import { Agent } from '@openai/agents';

const agent = new Agent({
  model: 'gpt-4o-mini',
  instructions: 'You help users with weather and calculations.',
  tools: [
    {
      type: 'function',
      function: {
        name: 'get_weather',
        description: 'Get current weather for a location',
        parameters: {
          type: 'object',
          properties: {
            location: { type: 'string', description: 'City name' }
          },
          required: ['location']
        }
      }
    }
  ],
});`;

export const agentWithContext = `import { Agent, RunContext } from '@openai/agents';

interface MyContext {
  userId: string;
  database: any;
}

const agent = new Agent({
  model: 'gpt-4o-mini',
  instructions: 'Access user data as needed.',
  tools: [{
    type: 'function',
    function: {
      name: 'get_user_data',
      description: 'Get user information',
      parameters: { type: 'object', properties: {} }
    }
  }]
});

const context: MyContext = {
  userId: 'user123',
  database: mockDatabase
};

const result = await agent.run('Get my profile info', { context });`;

export const agentWithAodOutputType = `import { Agent } from '@openai/agents';

const agent = new Agent({
  model: 'gpt-4o-mini',
  instructions: 'Provide structured responses.',
  outputTypes: {
    user_info: {
      type: 'object',
      properties: {
        name: { type: 'string' },
        age: { type: 'number' },
        email: { type: 'string' }
      },
      required: ['name', 'age']
    }
  }
});`;

export const agentWithHandoffs = `import { Agent } from '@openai/agents';

const supportAgent = new Agent({
  model: 'gpt-4o-mini',
  instructions: 'You handle technical support.',
});

const salesAgent = new Agent({
  model: 'gpt-4o-mini', 
  instructions: 'You handle sales inquiries.',
});

const mainAgent = new Agent({
  model: 'gpt-4o-mini',
  instructions: 'Route users to appropriate specialists.',
  handoffs: [supportAgent, salesAgent],
});`;

export const agentWithDynamicInstructions = `import { Agent } from '@openai/agents';

const agent = new Agent({
  model: 'gpt-4o-mini',
  instructions: (context) => {
    const timeOfDay = new Date().getHours() < 12 ? 'morning' : 'evening';
    return \`You are a helpful assistant. It's currently \${timeOfDay}. Adjust your tone accordingly.\`;
  },
});`;

export const agentWithLifecycleHooks = `import { Agent } from '@openai/agents';

const agent = new Agent({
  model: 'gpt-4o-mini',
  instructions: 'You are a helpful assistant.',
  hooks: {
    beforeRun: (context) => {
      console.log('Starting agent run...');
      context.data.startTime = Date.now();
    },
    afterRun: (context, result) => {
      const duration = Date.now() - context.data.startTime;
      console.log(\`Run completed in \${duration}ms\`);
    },
  },
});`;

export const agentCloning = `import { Agent } from '@openai/agents';

const baseAgent = new Agent({
  model: 'gpt-4o-mini',
  instructions: 'You are a helpful assistant.',
});

// Clone with modifications
const specializedAgent = baseAgent.clone({
  instructions: 'You are a specialized math tutor.',
  tools: [mathTool],
});`;

export const agentForcingToolUse = `import { Agent } from '@openai/agents';

const agent = new Agent({
  model: 'gpt-4o-mini',
  instructions: 'Use tools when available.',
  tools: [calculatorTool],
});

// Force tool use for this specific run
const result = await agent.run('Calculate 15 * 23', {
  toolChoice: 'required'
});`;

Agents are the main building‑block of the OpenAI Agents SDK. An **Agent** is a Large Language
Model (LLM) that has been configured with:

- **Instructions** – the system prompt that tells the model _who it is_ and _how it should
  respond_.
- **Model** – which OpenAI model to call, plus any optional model tuning parameters.
- **Tools** – a list of functions or APIs the LLM can invoke to accomplish a task.

<Code lang="typescript" code={simpleAgent} title="Basic Agent definition" />

The rest of this page walks through every Agent feature in more detail.

---

## Basic configuration

The `Agent` constructor takes a single configuration object. The most commonly‑used
properties are shown below.

| Property        | Required | Description                                                                                             |
| --------------- | -------- | ------------------------------------------------------------------------------------------------------- |
| `name`          | yes      | A short human‑readable identifier.                                                                      |
| `instructions`  | yes      | System prompt (string **or** function – see [Dynamic instructions](#dynamic-instructions)).             |
| `model`         | no       | Model name **or** a custom [`Model`](/openai-agents-js/openai/agents/interfaces/model/) implementation. |
| `modelSettings` | no       | Tuning parameters (temperature, top_p, etc.).                                                           |
| `tools`         | no       | Array of [`Tool`](/openai-agents-js/openai/agents/type-aliases/tool/) instances the model can call.     |

<Code lang="typescript" code={agentWithTools} title="Agent with tools" />

---

## Context

Agents are **generic on their context type** – i.e. `Agent<TContext, TOutput>`. The _context_
is a dependency‑injection object that you create and pass to `Runner.run()`. It is forwarded to
every tool, guardrail, handoff, etc. and is useful for storing state or providing shared
services (database connections, user metadata, feature flags, …).

<Code lang="typescript" code={agentWithContext} title="Agent with context" />

---

## Output types

By default, an Agent returns **plain text** (`string`). If you want the model to return a
structured object you can specify the `outputType` property. The SDK accepts:

1. A [Zod](https://github.com/colinhacks/zod) schema (`z.object({...})`).
2. Any JSON‑schema‑compatible object.

<Code
  lang="typescript"
  code={agentWithAodOutputType}
  title="Structured output with Zod"
/>

When `outputType` is provided, the SDK automatically uses
[structured outputs](https://platform.openai.com/docs/guides/structured-outputs) instead of
plain text.

---

## Handoffs

An Agent can **delegate** to other Agents via the `handoffs` property. A common pattern is to
use a _triage agent_ that routes the conversation to a more specialised sub‑agent.

<Code lang="typescript" code={agentWithHandoffs} title="Agent with handoffs" />

You can read more about this pattern in the [handoffs guide](/openai-agents-js/guides/handoffs).

---

## Dynamic instructions

`instructions` can be a **function** instead of a string. The function receives the current
`RunContext` and the Agent instance and can return a string _or_ a `Promise<string>`.

<Code
  lang="typescript"
  code={agentWithDynamicInstructions}
  title="Agent with dynamic instructions"
/>

Both synchronous and `async` functions are supported.

---

## Lifecycle hooks

For advanced use‑cases you can observe the Agent lifecycle by listening on events

<Code
  lang="typescript"
  code={agentWithLifecycleHooks}
  title="Agent with lifecycle hooks"
/>

---

## Guardrails

Guardrails allow you to validate or transform user input and agent output. They are configured
via the `inputGuardrails` and `outputGuardrails` arrays. See the
[guardrails guide](/openai-agents-js/guides/guardrails) for details.

---

## Cloning / copying agents

Need a slightly modified version of an existing agent? Use the `clone()` method, which returns
an entirely new `Agent` instance.

<Code lang="typescript" code={agentCloning} title="Cloning Agents" />

---

## Forcing tool use

Supplying tools doesn’t guarantee the LLM will call one. You can **force** tool use with
`modelSettings.tool_choice`:

1. `'auto'` (default) – the LLM decides whether to use a tool.
2. `'required'` – the LLM _must_ call a tool (it can choose which one).
3. `'none'` – the LLM must **not** call a tool.
4. A specific tool name, e.g. `'calculator'` – the LLM must call that particular tool.

<Code lang="typescript" code={agentForcingToolUse} title="Forcing tool use" />

### Preventing infinite loops

After a tool call the SDK automatically resets `tool_choice` back to `'auto'`. This prevents
the model from entering an infinite loop where it repeatedly tries to call the tool. You can
override this behaviour via the `resetToolChoice` flag or by configuring
`toolUseBehavior`:

- `'run_llm_again'` (default) – run the LLM again with the tool result.
- `'stop_on_first_tool'` – treat the first tool result as the final answer.
- `{ stopAtToolNames: ['my_tool'] }` – stop when any of the listed tools is called.
- `(context, toolResults) => ...` – custom function returning whether the run should finish.

```typescript
const agent = new Agent({
  ...,
  toolUseBehavior: 'stop_on_first_tool',
});
```

---

## Next steps

- Learn how to [run agents](/openai-agents-js/guides/running-agents).
- Dive into [tools](/openai-agents-js/guides/tools), [guardrails](/openai-agents-js/guides/guardrails), and [models](/openai-agents-js/guides/models).
- Explore the full TypeDoc reference under **@openai/agents** in the sidebar.
